<!DOCTYPE html>
<html>
<head>
    <title>Arabic Maqam Classifier</title>
</head>
<body>
    <h2>Upload an audio file to classify</h2>
    <input type="file" id="fileInput" accept=".mp3,.wav">
    <button id="uploadBtn">Upload & Classify</button>

    <h3 id="result"></h3>

    <script>
        document.getElementById("uploadBtn").addEventListener("click", async () => {
            const fileInput = document.getElementById("fileInput");
            if (!fileInput.files.length) {
                alert("Please select a file first");
                return;
            }

            const formData = new FormData();
            formData.append("file", fileInput.files[0]);

            try {
                const res = await fetch("/predict", {
                    method: "POST",
                    body: formData
                });
                const data = await res.json();
                document.getElementById("result").innerText = 
                    data.result ? "Predicted Maqam: " + data.result : "Error: " + data.error;
            } catch (err) {
                console.error(err);
                alert("Error uploading file");
            }
        });
    </script>
</body>
</html>
