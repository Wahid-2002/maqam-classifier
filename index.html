<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Maqam Classifier</title></head>
<body>
  <h2>Upload an audio file (.wav or .mp3)</h2>
  <input type="file" id="file" accept=".wav,.mp3">
  <button id="go">Upload & Classify</button>
  <pre id="out"></pre>

  <script>
    const btn = document.getElementById('go');
    const out = document.getElementById('out');
    btn.addEventListener('click', async () => {
      const f = document.getElementById('file').files[0];
      if (!f) { alert('Choose a file first'); return; }
      btn.disabled = true; out.textContent = 'Uploading...';
      try {
        const fd = new FormData(); fd.append('file', f);
        const res = await fetch(window.location.origin + '/predict', { method: 'POST', body: fd });
        const data = await res.json();
        out.textContent = JSON.stringify(data, null, 2);
      } catch (e) { out.textContent = 'Error: ' + e; }
      finally { btn.disabled = false; }
    });
  </script>
</body>
</html>
